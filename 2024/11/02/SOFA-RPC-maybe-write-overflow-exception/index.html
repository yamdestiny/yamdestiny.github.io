<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yamdestiny.xyz","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"hide","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":true,"nav":null,"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="ä½¿ç”¨ SOFA RPC çš„ Bolt åè®®åœ¨é«˜å¹¶å‘ã€å¤§æ•°æ®é‡ä¼ è¾“çš„åœºæ™¯ä¸­ï¼Œæœ‰å¯èƒ½ä¼šé‡åˆ° â€œMaybe Write Overflow!â€ è¿™ä¸€å¼‚å¸¸ã€‚æœ¬æ–‡å°†åˆ†æè¯¥å¼‚å¸¸çš„æˆå› ï¼Œå¹¶æä¾›å¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="SOFA RPC &quot;maybe write overflow!&quot; å¼‚å¸¸">
<meta property="og:url" content="https://yamdestiny.xyz/2024/11/02/SOFA-RPC-maybe-write-overflow-exception/index.html">
<meta property="og:site_name" content="Maple Story">
<meta property="og:description" content="ä½¿ç”¨ SOFA RPC çš„ Bolt åè®®åœ¨é«˜å¹¶å‘ã€å¤§æ•°æ®é‡ä¼ è¾“çš„åœºæ™¯ä¸­ï¼Œæœ‰å¯èƒ½ä¼šé‡åˆ° â€œMaybe Write Overflow!â€ è¿™ä¸€å¼‚å¸¸ã€‚æœ¬æ–‡å°†åˆ†æè¯¥å¼‚å¸¸çš„æˆå› ï¼Œå¹¶æä¾›å¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-11-02T08:10:02.000Z">
<meta property="article:modified_time" content="2024-11-10T17:24:56.154Z">
<meta property="article:author" content="Maple">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="SOFA Stack">
<meta property="article:tag" content="SOFA RPC">
<meta property="article:tag" content="Netty">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://yamdestiny.xyz/2024/11/02/SOFA-RPC-maybe-write-overflow-exception/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://yamdestiny.xyz/2024/11/02/SOFA-RPC-maybe-write-overflow-exception/","path":"2024/11/02/SOFA-RPC-maybe-write-overflow-exception/","title":"SOFA RPC \"maybe write overflow!\" å¼‚å¸¸"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SOFA RPC "maybe write overflow!" å¼‚å¸¸ | Maple Story</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-92396016-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-92396016-1","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?4eacbd1e85d8eebe356b663a83063d78"></script>







  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Maple Story</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Welcome to Maple Story ğŸ</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98"><span class="nav-number">1.</span> <span class="nav-text">é—®é¢˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E6%9E%90"><span class="nav-number">2.</span> <span class="nav-text">åˆ†æ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="nav-number">2.1.</span> <span class="nav-text">é—®é¢˜åˆ†æ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="nav-number">2.2.</span> <span class="nav-text">æºç åˆ†æ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E6%9E%90%E6%80%BB%E7%BB%93"><span class="nav-number">2.3.</span> <span class="nav-text">åˆ†ææ€»ç»“</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="nav-number">3.</span> <span class="nav-text">è§£å†³æ–¹æ¡ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5"><span class="nav-number">3.1.</span> <span class="nav-text">é—®é¢˜æ’æŸ¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96"><span class="nav-number">3.2.</span> <span class="nav-text">é…ç½®ä¼˜åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="nav-number">3.3.</span> <span class="nav-text">ä»£ç ä¼˜åŒ–</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">4.</span> <span class="nav-text">æ€»ç»“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-number">5.</span> <span class="nav-text">å‚è€ƒèµ„æ–™</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Maple"
      src="https://p3.music.126.net/Am30CzvY9NTxy1xiz5k3GQ==/7729566744520405.jpg?param=170y170">
  <p class="site-author-name" itemprop="name">Maple</p>
  <div class="site-description" itemprop="description">coding trainee</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">38</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yamdestiny" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;yamdestiny" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://steamcommunity.com/id/maple_wqs" title="Steam â†’ https:&#x2F;&#x2F;steamcommunity.com&#x2F;id&#x2F;maple_wqs" rel="noopener me" target="_blank"><i class="fab fa-steam fa-fw"></i>Steam</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yamdestiny.xyz/2024/11/02/SOFA-RPC-maybe-write-overflow-exception/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://p3.music.126.net/Am30CzvY9NTxy1xiz5k3GQ==/7729566744520405.jpg?param=170y170">
      <meta itemprop="name" content="Maple">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Maple Story">
      <meta itemprop="description" content="coding trainee">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="SOFA RPC "maybe write overflow!" å¼‚å¸¸ | Maple Story">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SOFA RPC "maybe write overflow!" å¼‚å¸¸
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2024-11-02 16:10:02" itemprop="dateCreated datePublished" datetime="2024-11-02T16:10:02+08:00">2024-11-02</time>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2024/11/02/SOFA-RPC-maybe-write-overflow-exception/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2024/11/02/SOFA-RPC-maybe-write-overflow-exception/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>ä½¿ç”¨ SOFA RPC çš„ Bolt åè®®åœ¨é«˜å¹¶å‘ã€å¤§æ•°æ®é‡ä¼ è¾“çš„åœºæ™¯ä¸­ï¼Œæœ‰å¯èƒ½ä¼šé‡åˆ° â€œMaybe Write Overflow!â€ è¿™ä¸€å¼‚å¸¸ã€‚æœ¬æ–‡å°†åˆ†æè¯¥å¼‚å¸¸çš„æˆå› ï¼Œå¹¶æä¾›å¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<span id="more"></span>

<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>çº¿ä¸Šç¯å¢ƒçš„æ—¥å¿—ä¸­ï¼Œå‘ç°æœ‰ <code>maybe write overflow!</code> çš„é”™è¯¯æ—¥å¿—è®°å½•ï¼Œæ—¥å¿—å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">2024-10-30 10:08:27.623 ERROR 13195 --- [http-nio-8080-exec-19] x.y.web.config.CustomExceptionHandler    : com.alipay.remoting.exception.RemotingException: Check connection failed for address: Origin url [bolt://192.168.88.141:12201?serialization=hessian2], Unique key [192.168.88.141:12201]., maybe write overflow!</span><br><span class="line"></span><br><span class="line">com.alipay.sofa.rpc.core.exception.SofaRpcException: com.alipay.remoting.exception.RemotingException: Check connection failed for address: Origin url [bolt://192.168.88.141:12201?serialization=hessian2], Unique key [192.168.88.141:12201]., maybe write overflow!</span><br><span class="line">    at com.alipay.sofa.rpc.transport.bolt.BoltClientTransport.convertToRpcException(BoltClientTransport.java:363) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.transport.bolt.BoltClientTransport.syncSend(BoltClientTransport.java:255) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.client.AbstractCluster.doSendMsg(AbstractCluster.java:613) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.client.AbstractCluster.sendMsg(AbstractCluster.java:584) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.ConsumerInvoker.invoke(ConsumerInvoker.java:63) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.ConsumerCustomHeaderFilter.invoke(ConsumerCustomHeaderFilter.java:47) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.FilterInvoker.invoke(FilterInvoker.java:100) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.PressureMarkTransformFilter.invoke(PressureMarkTransformFilter.java:63) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.FilterInvoker.invoke(FilterInvoker.java:100) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.sofatracer.ConsumerTracerFilter.invoke(ConsumerTracerFilter.java:66) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.FilterInvoker.invoke(FilterInvoker.java:100) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.RpcReferenceContextFilter.invoke(RpcReferenceContextFilter.java:80) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.FilterInvoker.invoke(FilterInvoker.java:100) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.ConsumerExceptionFilter.invoke(ConsumerExceptionFilter.java:37) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.FilterInvoker.invoke(FilterInvoker.java:100) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.filter.FilterChain.invoke(FilterChain.java:269) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.client.AbstractCluster.filterChain(AbstractCluster.java:558) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.client.FailoverCluster.doInvoke(FailoverCluster.java:68) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.client.AbstractCluster.invoke(AbstractCluster.java:298) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.client.ClientProxyInvoker.invoke(ClientProxyInvoker.java:83) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    ...</span><br><span class="line">Caused by: com.alipay.remoting.exception.RemotingException: Check connection failed for address: Origin url [bolt://192.168.88.141:12201?serialization=hessian2], Unique key [192.168.88.141:12201]., maybe write overflow!</span><br><span class="line">    at com.alipay.remoting.DefaultConnectionManager.check(DefaultConnectionManager.java:411) ~[bolt-1.5.10.jar:na]</span><br><span class="line">    at com.alipay.remoting.rpc.RpcClientRemoting.invokeSync(RpcClientRemoting.java:63) ~[bolt-1.5.10.jar:na]</span><br><span class="line">    at com.alipay.remoting.rpc.RpcClient.invokeSync(RpcClient.java:355) ~[bolt-1.5.10.jar:na]</span><br><span class="line">    at com.alipay.sofa.rpc.transport.bolt.BoltClientTransport.doInvokeSync(BoltClientTransport.java:279) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    at com.alipay.sofa.rpc.transport.bolt.BoltClientTransport.syncSend(BoltClientTransport.java:252) ~[sofa-rpc-all-5.8.3.jar:5.8.3]</span><br><span class="line">    ... 84 common frames omitted</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><h3 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h3><p>ç»æœç´¢ï¼Œå‘ç°åœ¨å®˜æ–¹ Repo ä¸­æœ‰å¯¹è¯¥å¼‚å¸¸çš„æé—®ä»¥åŠå¼€å‘äººå‘˜çš„è§£é‡Šï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">åŸå› </span><br><span class="line"></span><br><span class="line">RPCåœ¨å†™å‡ºæ•°æ®çš„æ—¶å€™ï¼Œä¼šæ£€æµ‹å½“å‰çš„ChannelOutboundBufferçš„å¤§å°ï¼Œå¦‚æœè¶…è¿‡äº†WRITE_BUFFER_HIGH_WATER_MARKï¼ˆé»˜è®¤64Kï¼‰ï¼Œå°±ä¼šé™æµï¼ŒæŠ¥write overflowçš„å¼‚å¸¸ã€‚</span><br><span class="line">è¿™ä¸ªæ˜¯ä¸ºäº†ä¿æŠ¤å®¢æˆ·ç«¯ï¼Œé˜²æ­¢æ— ç•Œçš„ChannelOutboundBufferè¢«æ‰“çˆ†ï¼Œå¯¼è‡´èµ„æºè€—å°½ã€‚</span><br><span class="line">é€šå¸¸æƒ…å†µä¸‹ï¼Œç½‘ç»œæœ‰é—®é¢˜ï¼Œå¯¼è‡´å†™å‡ºå¤±è´¥ï¼›æˆ–è€…ä¸‹æ¸¸å‹åŠ›å¤ªå¤§ï¼Œä¸èƒ½å¤„ç†è¿™ä¹ˆå¤šç½‘ç»œåŒ…çš„æ—¶å€™ä¼šå‡ºç°è¿™æ ·çš„å¼‚å¸¸ã€‚</span><br><span class="line"></span><br><span class="line">è§£å†³åŠæ³•ï¼š</span><br><span class="line"></span><br><span class="line">å»ºè®®é¦–å…ˆæ’æŸ¥ç½‘ç»œç¯å¢ƒï¼ˆç½‘å¡æ‰“æ»¡ä¹Ÿæ˜¯ä¸€ç§ï¼‰</span><br><span class="line">ç½‘ç»œç¯å¢ƒæ²¡é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œçœ‹ä¸‹æ˜¯å¦æ˜¯æµé‡è¿‡å¤§ï¼Œå¯¼è‡´ä¸‹æ¸¸å¤„ç†ä¸è¿‡æ¥ã€‚ï¼Œå¦‚æœæ˜¯è¿™ç§ï¼Œå¯èƒ½æ„å‘³ç€ï¼Œè¿™å°±æ˜¯å‹æµ‹çš„ç“¶é¢ˆäº†ã€‚å¯ä»¥è¯„ä¼°ä¸‹æ¸¸æ‰©å®¹ï¼Œæ€§èƒ½ä¼˜åŒ–ç­‰æ–¹å¼æ¥è§£å†³ã€‚</span><br><span class="line">å¦‚æœç¡®å®è®¤ä¸º64k ä¹Ÿä¸å¤Ÿç”¨. å¯ä»¥è‡ªè¡Œè°ƒæ•´</span><br><span class="line"></span><br><span class="line">-Dbolt.netty.buffer.low.watermark</span><br><span class="line">-Dbolt.netty.buffer.high.watermark</span><br><span class="line">å€¼è‡ªå·±ç®—ä¸€ä¸‹ï¼Œé»˜è®¤æ˜¯32*1024 å’Œ64*1024</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/sofastack/sofa-rpc/issues/551#issuecomment-475186984">Issue #551 Â· sofastack&#x2F;sofa-rpc Â· GitHub</a></p>
</blockquote>
<p>ä»¥åŠé‡åˆ°ç›¸ä¼¼é—®é¢˜çš„æ–‡ç«  <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7374bab1b00d">ä¿®å¤ netty é«˜æ°´ä½æº¢å‡ºé—®é¢˜è®°å½•</a>ï¼Œç»è¿‡å¯¹è¿™äº›ä¿¡æ¯çš„æ”¶é›†ä¸åˆ†æï¼Œåœ¨æ’é™¤ç½‘ç»œè¿™ä¸€æ¡ä»¶åï¼Œå¯çŸ¥å½“å‚æ•°å¤§å°ä¸å¹¶å‘é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œä¼šè§¦å‘è¿™ä¸ªé™æµæœºåˆ¶å¹¶æŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œé™æµæœºåˆ¶çš„ç›®çš„æ˜¯ä¸ºäº†ä¿æŠ¤å®¢æˆ·ç«¯ï¼Œé˜²æ­¢èµ„æºè€—å°½ã€‚</p>
<blockquote>
<p>åˆ†æä»…é’ˆå¯¹ä»£ç å±‚é¢ï¼Œç½‘ç»œå› ç´ éœ€æ’æŸ¥æ“ä½œç³»ç»Ÿè¿æ¥æ•°è®¾ç½®ï¼Œæ“ä½œç³»ç»Ÿç½‘ç»œç¼“å†²åŒºè®¾ç½®ï¼ŒI&#x2F;Oï¼Œç½‘ç»œç¡¬ä»¶ï¼Œé˜²ç«å¢™è®¾ç½®ç­‰ç­‰ã€‚ç‰¹åˆ«æ˜¯é˜²ç«å¢™æŸäº›é…ç½®å¯èƒ½ä¼šå½±å“è¿æ¥ä¼ è¾“é€Ÿç‡æˆ–ç¨³å®šæ€§ï¼ˆæ–­è¿ååˆæ¢å¤è¿æ¥ï¼‰ã€‚</p>
</blockquote>
<h3 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h3><p>å¼‚å¸¸æŠ›å‡ºä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.alipay.remoting.rpc.RpcClientRemoting#invokeSync</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">invokeSync</span><span class="params">(Url url, Object request, InvokeContext invokeContext, <span class="type">int</span> timeoutMillis)</span> <span class="keyword">throws</span> RemotingException, InterruptedException &#123;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="built_in">this</span>.getConnectionAndInitInvokeContext(url, invokeContext); <span class="comment">// è·å–è¿æ¥</span></span><br><span class="line">    <span class="built_in">this</span>.connectionManager.check(conn); <span class="comment">// æ£€æŸ¥è¿æ¥æ˜¯å¦å¯ç”¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.invokeSync(conn, request, invokeContext, timeoutMillis); <span class="comment">// è°ƒç”¨æœåŠ¡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// com.alipay.remoting.DefaultConnectionManager#check</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">check</span><span class="params">(Connection connection)</span> <span class="keyword">throws</span> RemotingException &#123;</span><br><span class="line">    <span class="keyword">if</span> (connection == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RemotingException</span>(<span class="string">&quot;Connection is null when do check!&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (connection.getChannel() != <span class="literal">null</span> &amp;&amp; connection.getChannel().isActive()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!connection.getChannel().isWritable()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RemotingException</span>(<span class="string">&quot;Check connection failed for address: &quot;</span> + connection.getUrl() + <span class="string">&quot;, maybe write overflow!&quot;</span>); <span class="comment">// å¼‚å¸¸æŠ›å‡ºè¡Œ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.remove(connection);</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RemotingException</span>(<span class="string">&quot;Check connection failed for address: &quot;</span> + connection.getUrl());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»å¯¹æºç åˆ†æï¼Œè¯¥å¼‚å¸¸åªä¼šåœ¨å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡ç«¯å‰ï¼Œå¯¹è¿æ¥æ˜¯å¦å¯ç”¨åšåˆ¤æ–­æ—¶ï¼Œå¦‚è¿æ¥ï¼ˆ<code>Connection</code> å¯¹è±¡ï¼‰å­˜åœ¨ï¼Œä¸”è¿æ¥å¤„äºæ´»è·ƒçŠ¶æ€ï¼ˆ<code>isActive()</code>ï¼‰ï¼Œä¸”å‘é€ç¼“å†²åŒºçš„å·²å†™å…¥å¤§å°è¶…è¿‡äº†é«˜æ°´ä½æ ‡è®°æ—¶ï¼Œè¿æ¥ä¼šè¢«æ ‡è®°ä¸ºä¸å¯å†™ï¼ˆ<code>isWritable()</code>ï¼‰ï¼Œç»§è€ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</p>
<blockquote>
<p><code>com.alipay.remoting.Connection</code> æ˜¯ SOFA RPC çš„å®ç°ï¼Œå¼•ç”¨çš„ <code>io.netty.channel.Channel</code> æ˜¯ Netty çš„å®ç°ã€‚</p>
<p><code>Connection</code> åªä¼šæŒæœ‰ä¸€ä¸ª <code>Channel</code>ï¼Œ<code>Channel</code> ä¸å¯å†™å³ <code>Connection</code> ä¸å¯å†™ã€‚</p>
</blockquote>
<p>å¯å†™æ€§ç”±ä»¥ä¸‹å› ç´ åˆ¤æ–­ï¼š</p>
<ol>
<li>å½“ Channel çš„å‘é€ç¼“å†²åŒºæœªè¢«å¡«æ»¡æ—¶ï¼ŒChannel å¯å†™ã€‚</li>
<li>å½“ Channel çš„å‘é€ç¼“å†²åŒºå¤§å°å¤§äºé«˜æ°´ä½æ ‡è®°æ—¶ï¼ŒChannel ä¸å¯å†™ã€‚</li>
<li>å½“ Channel çš„å‘é€ç¼“å†²åŒºå¤§å°å°äºä½æ°´ä½æ ‡è®°æ—¶ï¼ŒChannel å¯å†™ã€‚</li>
</ol>
<blockquote>
<p>Netty çš„æ°´ä½æœºåˆ¶ä¸»è¦é€šè¿‡å®šä¹‰é«˜æ°´ä½ï¼ˆhigh watermarkï¼‰å’Œä½æ°´ä½ï¼ˆlow watermarkï¼‰ä¸¤ç§é˜ˆå€¼æ¥æ§åˆ¶æ•°æ®çš„æµå…¥å’Œæµå‡ºï¼š</p>
<ul>
<li>é«˜æ°´ä½ï¼ˆHigh Watermarkï¼‰ï¼šå½“å¾…å‘é€çš„æ•°æ®ç§¯ç´¯è¶…è¿‡æ­¤å€¼æ—¶ï¼ŒNetty ä¼šæš‚åœå†™æ“ä½œï¼Œé˜²æ­¢æ•°æ®è¿›ä¸€æ­¥çš„è¿›å…¥å‘é€ç¼“å†²åŒºã€‚è¿™ç›¸å½“äºé˜»æ­¢â€œæ°´ä½â€ç»§ç»­å‡é«˜ã€‚</li>
<li>ä½æ°´ä½ï¼ˆLow Watermarkï¼‰ï¼šå½“æ•°æ®ç§¯å‹ä½äºæ­¤å€¼æ—¶ï¼Œé‡æ–°å¼€å¯å†™æ“ä½œï¼Œå…è®¸æ•°æ®ç»§ç»­æµåŠ¨ã€‚</li>
</ul>
<p>é€šè¿‡è¿™ä¸¤ä¸ªâ€œæ°´ä½çº¿â€ï¼Œé¿å…å‘é€é˜Ÿåˆ—è¿‡åº¦ç§¯å‹ï¼Œé˜²æ­¢å†…å­˜æº¢å‡ºï¼Œä¿éšœç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚</p>
</blockquote>
<p>åˆå› ä¸º SOFA RPC å¯¹ Bolt åè®®çš„é€šä¿¡å®ç°æ˜¯<strong>å•ä¸€é•¿è¿æ¥</strong>ã€‚å³ï¼Œå®¢æˆ·ç«¯å¯åŠ¨ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥åï¼Œå°±ä¼šå°†è¿æ¥æ”¾åœ¨è¿æ¥æ± ä¸­ï¼Œè¿æ¥æ± ä»¥åœ°å€ï¼ˆIP + Portï¼‰ä¸ºé”®ã€‚è°ƒç”¨æ—¶ï¼Œæ ¹æ®æœåŠ¡ç«¯çš„åœ°å€è·å–è¿æ¥ï¼Œè°ƒç”¨åŒä¸€æœåŠ¡ç«¯çš„ï¼Œéƒ½å…±äº«ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ç”¨äºå‘é€æ•°æ®ï¼Œä¹Ÿå³å…±äº«å‘é€ç¼“å†²åŒºã€‚</p>
<p>å…¶å‘é€æ•°æ®åŸºæœ¬æµç¨‹ä¸ºï¼š</p>
<ol>
<li>è¯·æ±‚æ¶ˆæ¯æ•°æ®åºåˆ—åŒ–ã€‚</li>
<li>è°ƒç”¨ write æ–¹æ³•å†™å…¥å‘é€ç¼“å†²åŒºã€‚</li>
<li>è°ƒç”¨ flush æ–¹æ³•å°†å‘é€ç¼“å†²åŒºçš„æ•°æ®å‘é€å‡ºå»ã€‚ï¼ˆflush æ“ä½œåï¼Œæ•°æ®å°†è¢«æ”¾å…¥æ“ä½œç³»ç»Ÿæä¾›çš„åº•å±‚ Socket å‘é€ç¼“å†²åŒºï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å‘é€ã€‚ï¼‰</li>
</ol>
<p>æŒç»­çš„è¯·æ±‚åŒä¸€æœåŠ¡ç«¯ä¼šå°†æ•°æ®ä¸æ–­å†™å…¥åŒä¸€å‘é€ç¼“å†²åŒºï¼Œå‘é€ç¼“å†²åŒºçš„æ•°æ®æœªåŠæ—¶é€šè¿‡ç½‘ç»œå‘å‡ºï¼Œè§¦å‘é«˜æ°´ä½é™åˆ¶ï¼Œåç»­è¯·æ±‚å³ä¼šè§¦å‘è¯¥å¼‚å¸¸ï¼Œå¹¶ä¸­æ–­è¯·æ±‚ã€‚</p>
<h3 id="åˆ†ææ€»ç»“"><a href="#åˆ†ææ€»ç»“" class="headerlink" title="åˆ†ææ€»ç»“"></a>åˆ†ææ€»ç»“</h3><p>Netty çš„å¯å†™æ€§æœºåˆ¶æœ¬èº«ä¸ä¼šåšä»»ä½•å¡æ§ï¼Œå³å…¶å‘é€ç¼“å†²åŒºï¼ˆ<code>io.netty.channel.ChannelOutboundBuffer</code>ï¼‰æ˜¯è¿‘ä¹æ— ç•Œçš„ã€‚å½“å‘é€ç¼“å†²åŒºçš„æ•°æ®é‡è¾¾åˆ°é«˜æ°´ä½æ—¶ï¼Œä»…åªæ˜¯å°†å¯å†™çŠ¶æ€è®¾ä¸º <code>false</code>ï¼Œå®é™…äº§ç”Ÿè¯¥å¼‚å¸¸æ˜¯ SOFA RPC å‡ºäºä¿æŠ¤å®¢æˆ·ç«¯çš„ç›®çš„å¯ç”¨äº†å¯å†™æ€§æœºåˆ¶ï¼Œä¿æŠ¤å‘é€ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸ä¼šå› å‘é€è¿‡å¤šæ•°æ®å¯¼è‡´å†…å­˜æº¢å‡ºæˆ–ç½‘ç»œæ‹¥å µã€‚</p>
<p>Netty é»˜è®¤é«˜æ°´ä½ä¸º 64kbï¼Œä½æ°´ä½ 32kbï¼ŒSOFA RPC æ²¿ç”¨è¯¥é»˜è®¤å€¼ã€‚</p>
<p>ç”±æ­¤å¯çŸ¥ï¼Œäº§ç”Ÿè¯¥å¼‚å¸¸ä¸»è¦æ˜¯ç”±äºå‘é€ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰æ¶ˆæ¯å †ç§¯ï¼Œè¶…è¿‡é»˜è®¤é«˜æ°´ä½ 64kb çš„é™åˆ¶ï¼Œé€ æˆæ¶ˆæ¯å †ç§¯çš„åŸå› ä¸»è¦æœ‰ï¼š</p>
<ol>
<li>å‘é€æ–¹å‘é€æ•°æ®æµé‡è¿‡å¤§ï¼Œå³è¯·æ±‚è¿‡å¤šã€æ•°æ®è¿‡å¤§ï¼Œç›´æ¥è§¦å‘äº†é«˜æ°´ä½é™åˆ¶ã€‚</li>
<li>æ¥æ”¶æ–¹å¤„ç†èƒ½åŠ›ä¸å¤Ÿï¼Œå‘é€æ–¹å‘é€çš„æ•°æ®ï¼Œä¸èƒ½åŠæ—¶è¢«æ¥æ”¶æ–¹å¤„ç†ï¼Œå¯¼è‡´æ•°æ®åœ¨æ“ä½œç³»ç»Ÿç½‘ç»œä¼ è¾“å±‚é¢è¢«é˜»å¡ï¼Œæ•°æ®åœ¨ç¼“å†²åŒºä¸­ç­‰å¾…å‘é€ï¼Œé—´æ¥å¯¼è‡´å‘é€æ–¹ä¸èƒ½åŠæ—¶å°†æ•°æ®å‘å‡ºï¼Œè¿›è€Œè§¦å‘äº†é«˜æ°´ä½é™åˆ¶ã€‚</li>
</ol>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="é—®é¢˜æ’æŸ¥"><a href="#é—®é¢˜æ’æŸ¥" class="headerlink" title="é—®é¢˜æ’æŸ¥"></a>é—®é¢˜æ’æŸ¥</h3><ol>
<li>æ—¥å¿—åˆ†æï¼šæ£€æŸ¥ä¸ SOFA RPC ç›¸å…³çš„æ—¥å¿—ï¼Œå®šä½é”™è¯¯å‘ç”Ÿçš„ä¸Šä¸‹æ–‡ï¼Œå…³æ³¨é«˜å¹¶å‘æˆ–æ•°æ®é‡å¤§çš„æ“ä½œï¼Œé¿å…ä¸å¿…è¦çš„å¹¶å‘ä¸å·¨å¤§æ•°æ®ä¼ è¾“ã€‚</li>
<li>ç³»ç»Ÿæ€§èƒ½æ£€æµ‹ï¼šè¯„ä¼°ç³»ç»Ÿçš„ CPUã€å†…å­˜ã€I&#x2F;O ç­‰èµ„æºä½¿ç”¨æƒ…å†µï¼Œç¡®ä¿ç¡¬ä»¶èµ„æºæ²¡æœ‰æˆä¸ºç“¶é¢ˆã€‚</li>
<li>ç½‘ç»œçŠ¶å†µç›‘æ§ï¼šè¯„ä¼°ç½‘ç»œè¿æ¥ã€ä¼ è¾“ç­‰æ–¹é¢çš„é…ç½®ï¼Œç¡®ä¿æ²¡æœ‰ç½‘ç»œè®¾å¤‡æ•…éšœï¼Œæ¯”å¦‚é˜²ç«å¢™è®¾ç½®ã€æœåŠ¡å™¨ç½‘å¡å µå¡ç­‰é—®é¢˜ã€‚</li>
<li>çº¿ç¨‹çŠ¶æ€æ£€æŸ¥ï¼šé€šè¿‡ç›‘æµ‹çº¿ç¨‹æ± å’Œ GC æ´»åŠ¨ï¼Œè¯†åˆ«æ˜¯å¦å› çº¿ç¨‹é˜»å¡æˆ– GC å¯¼è‡´æœåŠ¡æš‚åœå¤„ç†ã€‚</li>
</ol>
<h3 id="é…ç½®ä¼˜åŒ–"><a href="#é…ç½®ä¼˜åŒ–" class="headerlink" title="é…ç½®ä¼˜åŒ–"></a>é…ç½®ä¼˜åŒ–</h3><ol>
<li><p>é€‚åº¦è°ƒæ•´å®¢æˆ·ç«¯æ°´ä½å‚æ•°ï¼šé€šè¿‡é…ç½® <code>-Dbolt.netty.buffer.low.watermark</code> å’Œ <code>-Dbolt.netty.buffer.high.watermark</code> æ¥è°ƒæ•´ Netty çš„ä½æ°´ä½å’Œé«˜æ°´ä½ï¼Œé¿å…è¿‡æ—©è§¦å‘é™æµã€‚</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•ä½ï¼šByte, 65536Bytes = 64KB * 1024, 131072Bytes = 128KB * 1024</span></span><br><span class="line">-Dbolt.netty.buffer.low.watermark=65536 -Dbolt.netty.buffer.high.watermark=131072</span><br></pre></td></tr></table></figure>

<blockquote>
<p>éœ€æ ¹æ®ä¸šåŠ¡å®é™…æƒ…å†µè°ƒæ•´ï¼Œé¿å…é«˜æ°´ä½è°ƒæ•´è¿‡å¤§å¸¦æ¥çš„èµ„æºè€—å°½é£é™©ï¼Œè°ƒæ•´æ°´ä½åï¼Œåº”è·Ÿè¿›è§‚å¯Ÿ CPU å’Œå†…å­˜å ç”¨æƒ…å†µã€‚</p>
</blockquote>
</li>
<li><p>ä¼˜åŒ–æœåŠ¡ç«¯çº¿ç¨‹æ± è®¾ç½®ï¼šæ ¹æ®ç³»ç»Ÿç‰¹æ€§è®¾ç½®åˆç†çš„çº¿ç¨‹æ± å‚æ•°ï¼Œé¿å…è¯·æ±‚è¿‡è½½ã€‚</p>
 <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">com.alipay.sofa.rpc.bolt.thread.pool.core.size</span>=<span class="string">20</span></span><br><span class="line"><span class="attr">com.alipay.sofa.rpc.bolt.thread.pool.max.size</span>=<span class="string">200</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>éœ€æ ¹æ®ä¸šåŠ¡å®é™…æƒ…å†µè°ƒæ•´ï¼Œé¿å…è°ƒæ•´è¿‡å°å¯¼è‡´ä¸šåŠ¡æ— æ³•å¤„ç†ï¼Œè°ƒæ•´è¿‡å¤§å¸¦æ¥çš„èµ„æºè€—å°½é£é™©ï¼Œè°ƒæ•´çº¿ç¨‹æ•°åï¼Œåº”è·Ÿè¿›è§‚å¯Ÿ CPU å’Œå†…å­˜å ç”¨æƒ…å†µã€‚</p>
</blockquote>
</li>
</ol>
<h3 id="ä»£ç ä¼˜åŒ–"><a href="#ä»£ç ä¼˜åŒ–" class="headerlink" title="ä»£ç ä¼˜åŒ–"></a>ä»£ç ä¼˜åŒ–</h3><ol>
<li>å‡å°‘å®¢æˆ·ç«¯å•æ¬¡è¯·æ±‚æ•°æ®é‡ï¼šéœ€è¿›è¡Œåˆ†é¡µæˆ–åˆ†æ‰¹å¤„ç†ï¼Œé¿å…é•¿æ—¶é—´å ç”¨è¿æ¥ï¼Œå‡å°‘å¤§æ•°æ®é‡ç¬æ—¶å†™å…¥ã€‚</li>
<li>å‡å°‘å®¢æˆ·ç«¯å¹¶å‘è¯·æ±‚é‡ï¼šéœ€å¯¹é¢‘ç¹çš„å°è¯·æ±‚è¿›è¡Œåˆå¹¶å‡å°‘è¯·æ±‚æ¬¡æ•°ï¼Œé¿å…ä¸åˆç†çš„æŒç»­å¤šæ¬¡è°ƒç”¨æœåŠ¡ç«¯ã€‚</li>
</ol>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åˆç†è°ƒæ•´å®¢æˆ·ç«¯æ°´ä½å‚æ•°ã€ä¼˜åŒ–æœåŠ¡ç«¯çº¿ç¨‹æ± è®¾ç½®ä»¥åŠå‡å°‘å®¢æˆ·ç«¯å•æ¬¡è¯·æ±‚æ•°æ®é‡å’Œå¹¶å‘è¯·æ±‚é‡èƒ½æœ‰æ•ˆé¿å…è¯¥å¼‚å¸¸å¹¶æé«˜ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/sofastack/sofa-rpc/issues/551">Issue #551 Â· sofastack&#x2F;sofa-rpc Â· GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/sofastack/sofa-rpc/issues/557">Issue #557 Â· sofastack&#x2F;sofa-rpc Â· GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7374bab1b00d">ä¿®å¤ netty é«˜æ°´ä½æº¢å‡ºé—®é¢˜è®°å½•</a></li>
<li><a target="_blank" rel="noopener" href="https://www.sofastack.tech/blog/sofa-rpc-framework-overall-extension/">ã€å‰–æ | SOFARPC æ¡†æ¶ã€‘ä¹‹æ€»ä½“è®¾è®¡ä¸æ‰©å±•æœºåˆ¶</a></li>
<li><a target="_blank" rel="noopener" href="https://www.sofastack.tech/blog/sofa-rpc-connection-management-heartbeat-analysis/">ã€å‰–æ | SOFARPC æ¡†æ¶ã€‘ä¹‹ SOFARPC è¿æ¥ç®¡ç†ä¸å¿ƒè·³å‰–æ</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6c4a7cbbe2b5">Netty é«˜çº§åŠŸèƒ½ï¼ˆä¸€ï¼‰ï¼šæµæ§å’Œæµé‡æ•´å½¢</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/silyvin/p/12145700.html">netty é«˜ä½æ°´ä½æµæ§ï¼ˆyetï¼‰</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2451908">Netty çš„å†™ç¼“å†²åŒºå®¹é‡ä¸€ç›´ä¸º 0ï¼Œæœ€åå±…ç„¶æ˜¯ç½‘ç»œå¸¦å®½é—®é¢˜â€¦</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Maple
  </li>
  <li class="post-copyright-link">
      <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
      <a href="https://yamdestiny.xyz/2024/11/02/SOFA-RPC-maybe-write-overflow-exception/" title="SOFA RPC &quot;maybe write overflow!&quot; å¼‚å¸¸">https://yamdestiny.xyz/2024/11/02/SOFA-RPC-maybe-write-overflow-exception/</a>
  </li>
  <li class="post-copyright-license">
      <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
              <a href="/tags/SOFA-Stack/" rel="tag"># SOFA Stack</a>
              <a href="/tags/SOFA-RPC/" rel="tag"># SOFA RPC</a>
              <a href="/tags/Netty/" rel="tag"># Netty</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/03/14/GL-MT3000/" rel="prev" title="GL-MT3000 ä½¿ç”¨è®°å½•">
                  <i class="fa fa-angle-left"></i> GL-MT3000 ä½¿ç”¨è®°å½•
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2016 â€“ 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Maple</span>
  </div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/yamdestiny" class="github-corner" title="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘" aria-label="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"yamdestiny","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
